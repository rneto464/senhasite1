<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>criador de senhas</title>
    <link rel="stylesheet" href="SENHA.css">
</head>
<body>
    <header>
        <h1>Filas e Senhas</h1>
    </header>
    <main>
        <div class="senha">
            <h2>Senha:</h2>
            <h2 id="senha">N000</h2>
        </div>
    </main>
    <script>
        const vSenha = document.querySelector("#senha");
        let senhaNormal = localStorage.getItem('senhaNormal');
        let senhaPreferencial = localStorage.getItem('senhaPreferencial');
        let ultimaSenha = localStorage.getItem('ultimaSenha');
        let audio = new Audio('senha.mp3');

        
        if(!senhaNormal)
          senhaNormal = 0

        
        if(!senhaPreferencial)
           senhaPreferencial = 0
        
        if(!ultimaSenha)
           ultimaSenha = 'N'


           mostrarSenha()

        window,addEventListener('keydown' , function(e) {
            if (e.key == 'n' || e.key == 'N') {
                senhaNormal++;
                 ultimaSenha = 'N';
                 audio.play();
            } else if (e.key == 'p' || e.key == 'P'){
                senhaPreferencial++;
                ultimaSenha = 'P';
                audio.play();
            } else if (e.key == 'r' ||e.key == 'R'){
                ultimaSenha = 'N';
                senhaNormal = 0;
                senhaPreferencial = 0;
            }
            
            localStorage.setItem('senhaNormal' , senhaNormal);
            localStorage.setItem('senhaPreferencial' , senhaPreferencial);
            localStorage.setItem('ultimaSenha' , ultimaSenha);
         
            mostrarSenha();

        });
        
        function mostrarSenha() {
            if(ultimaSenha == 'N'){
                vSenha.innerHTML = 'N' + parseInt(senhaNormal).toLocaleString('pt-br', {minimumIntegerDigits: 3});
            } else {
                vSenha.innerHTML = 'P' + parseInt(senhaPreferencial).toLocaleString('pt-br', {minimumIntegerDigits: 3});
            }
        }


    </script>
</body>
</html>